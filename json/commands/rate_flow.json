{
  "flow_name": "/rate",
  "summary": "Memulai alur pemberian rating untuk sebuah media.",
  "description": "Dipicu dengan me-reply sebuah media dengan perintah /rate. Memulai proses interaktif di mana pengguna diminta memilih kategori rating.",
  "initial_checks": [
    {
      "name": "Pengecekan Fitur Bot",
      "action": "Memastikan fitur bot adalah 'rate'. Jika tidak, sarankan bot yang benar."
    },
    {
      "name": "Pengecekan Kiriman Tertunda",
      "action": "Memanggil `MediaPackageRepository::hasPendingPost()` untuk memeriksa apakah pengguna sudah memiliki kiriman yang menunggu moderasi."
    },
    {
      "name": "Pengecekan Pesan Balasan (Reply)",
      "action": "Memastikan perintah me-reply pesan lain."
    },
    {
      "name": "Validasi Tipe Media",
      "action": "Memastikan pesan yang dibalas adalah foto atau video."
    },
    {
      "name": "Validasi Kepemilikan Media",
      "action": "Memastikan pengguna tidak memberi rating pada media milik orang lain."
    }
  ],
  "main_flow": [
    {
      "step_number": 1,
      "name": "Pengaturan State Pengguna",
      "description": "Menyimpan state pengguna ke `awaiting_rate_category` dan menyimpan konteks pesan yang dibalas.",
      "action": "`UserRepository::setUserState()`"
    },
    {
      "step_number": 2,
      "name": "Permintaan Pemilihan Kategori",
      "description": "Mengirim pesan \"Silakan pilih kategori:\" dengan keyboard inline berisi pilihan kategori."
    }
  ],
  "next_flow": "Alur selanjutnya ditangani oleh `CallbackQueryHandler` yang akan memicu `RateCallback`."
}