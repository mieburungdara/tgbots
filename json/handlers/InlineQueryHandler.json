{
  "class_name": "InlineQueryHandler",
  "implements": "HandlerInterface",
  "summary": "Menangani permintaan `inline_query` untuk berbagi konten.",
  "description": "Handler ini dipanggil oleh `UpdateDispatcher` ketika pengguna mengetik username bot di kolom chat. Ia akan mencari paket media berdasarkan ID publik yang diketik pengguna dan mengembalikan hasil yang dapat dibagikan.",
  "dependencies": [
    "MediaPackageRepository"
  ],
  "methods": [
    {
      "name": "handle",
      "description": "Memproses query inline, mencari paket, dan mengirimkan hasilnya.",
      "parameters": [
        {
          "name": "app",
          "type": "App"
        },
        {
          "name": "inline_query",
          "type": "array",
          "description": "Data `inline_query` dari Telegram."
        }
      ],
      "logic_flow": [
        "1. Mengambil teks query dari `inline_query['query']`.",
        "2. Jika teks query cukup panjang, panggil `MediaPackageRepository::findByPublicId()`.",
        "3. Jika paket ditemukan, format hasilnya menjadi `InlineQueryResultArticle`.",
        "4. Hasilnya mencakup judul, deskripsi (harga), dan `reply_markup` dengan tombol 'Beli Sekarang' yang berisi URL deep link ke bot.",
        "5. Memanggil `TelegramAPI::answerInlineQuery()` dengan hasil yang sudah diformat."
      ]
    }
  ]
}
