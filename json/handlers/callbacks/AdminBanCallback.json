{
  "class_name": "AdminBanCallback",
  "implements": "CallbackCommandInterface",
  "summary": "Menangani aksi saat admin memblokir seorang pengguna dari pesan moderasi.",
  "description": "Callback ini akan mengubah status pengguna menjadi 'blocked', menolak post terkait (jika ada), dan memberi notifikasi kepada semua pihak.",
  "dependencies": [
    "UserRepository",
    "MediaPackageRepository"
  ],
  "methods": [
    {
      "name": "execute",
      "description": "Menjalankan logika pemblokiran dalam sebuah transaksi database.",
      "parameters": [
        {
          "name": "app",
          "type": "App"
        },
        {
          "name": "callback_query",
          "type": "array"
        },
        {
          "name": "params",
          "type": "string",
          "description": "Parameter berisi `user_id`, `public_id` (opsional), dan `reason` (opsional)."
        }
      ],
      "logic_flow": [
        "1. Memulai transaksi database.",
        "2. Panggil `UserRepository::updateUserStatusByTelegramId()` untuk mengubah status pengguna menjadi 'blocked'.",
        "3. Jika ada `public_id`, ubah status post terkait menjadi 'rejected'.",
        "4. Kirim notifikasi ke pengguna yang diblokir.",
        "5. Edit pesan moderasi asli untuk menandai bahwa pengguna telah diblokir.",
        "6. Commit transaksi."
      ]
    }
  ]
}
