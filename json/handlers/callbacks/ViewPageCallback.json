{
  "class_name": "ViewPageCallback",
  "implements": "CallbackCommandInterface",
  "summary": "Menampilkan konten dari sebuah paket yang sudah dibeli atau dimiliki.",
  "description": "Callback ini dipicu saat pengguna menekan tombol \"Lihat Konten\". Ia akan mengirimkan media dari paket yang diminta ke pengguna, lengkap dengan navigasi halaman jika media lebih dari satu.",
  "dependencies": [
    "MediaPackageRepository",
    "SaleRepository"
  ],
  "methods": [
    {
      "name": "execute",
      "description": "Mengirimkan media dari paket dengan paginasi.",
      "parameters": [
        {
          "name": "app",
          "type": "App"
        },
        {
          "name": "callback_query",
          "type": "array"
        },
        {
          "name": "params",
          "type": "string",
          "description": "Parameter berisi `public_id` dan `page_index`."
        }
      ],
      "logic_flow": [
        "1. Validasi hak akses: periksa apakah pengguna adalah penjual, sudah membeli, atau penerima hadiah yang belum mengklaim/kadaluarsa.",
        "2. Jika hadiah belum diklaim atau sudah kadaluarsa, tampilkan pesan dan tombol klaim/kadaluarsa/hadiah ulang.",
        "3. Panggil `MediaPackageRepository::getGroupedPackageContent()` untuk mendapatkan konten yang sudah dikelompokkan per halaman.",
        "4. Buat keyboard navigasi halaman jika ada lebih dari satu halaman.",
        "5. Hapus pesan asli yang berisi tombol.",
        "6. Jika halaman berisi satu media, panggil `copyMessage`.",
        "7. Jika halaman berisi grup media, panggil `copyMessages` dan kirim deskripsi/navigasi di pesan terpisah."
      ]
    }
  ]
}