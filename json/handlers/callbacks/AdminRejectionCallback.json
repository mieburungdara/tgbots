{
  "class_name": "AdminRejectionCallback",
  "implements": "CallbackCommandInterface",
  "summary": "Menangani aksi saat admin menolak sebuah kiriman moderasi.",
  "description": "Callback ini akan mengubah status post menjadi 'rejected', memberi notifikasi kepada pengguna, dan memperbarui pesan moderasi.",
  "dependencies": [
    "MediaPackageRepository"
  ],
  "methods": [
    {
      "name": "execute",
      "description": "Menjalankan logika penolakan dalam sebuah transaksi database.",
      "parameters": [
        {
          "name": "app",
          "type": "App"
        },
        {
          "name": "callback_query",
          "type": "array"
        },
        {
          "name": "params",
          "type": "string",
          "description": "Parameter berisi `public_id` dan `reason` (opsional)."
        }
      ],
      "logic_flow": [
        "1. Memulai transaksi database.",
        "2. Cari post berdasarkan `public_id` dan validasi statusnya adalah 'pending'.",
        "3. Ubah status post menjadi 'rejected' di `media_packages`.",
        "4. Kirim notifikasi ke pengguna asli yang berisi alasan penolakan.",
        "5. Edit pesan moderasi asli untuk menandai bahwa post telah ditolak.",
        "6. Commit transaksi."
      ]
    }
  ]
}
