{
  "class_name": "PostToChannelCallback",
  "implements": "CallbackCommandInterface",
  "summary": "Memposting sebuah paket konten ke channel penjualan yang dipilih.",
  "description": "Callback ini dipicu setelah penjual memilih channel. Ia akan mengambil data bot pengelola channel, membuat caption, dan menyalin media thumbnail ke channel publik.",
  "dependencies": [
    "MediaPackageRepository",
    "ChannelPostPackageRepository",
    "FeatureChannelRepository",
    "BotRepository"
  ],
  "methods": [
    {
      "name": "execute",
      "description": "Menjalankan logika posting ke channel.",
      "parameters": [
        {
          "name": "app",
          "type": "App"
        },
        {
          "name": "callback_query",
          "type": "array"
        },
        {
          "name": "params",
          "type": "string",
          "description": "Parameter berisi `public_id` dan `feature_channel_id`."
        }
      ],
      "logic_flow": [
        "1. Validasi kepemilikan paket dan channel.",
        "2. Ambil data bot pengelola dari `managing_bot_id` di `feature_channels`.",
        "3. Buat instance `TelegramAPI` baru dengan token bot pengelola.",
        "4. Ambil thumbnail paket yang valid.",
        "5. Buat caption dengan deskripsi dan harga.",
        "6. Panggil `copyMessage` menggunakan API bot pengelola untuk memposting ke channel publik.",
        "7. Jika berhasil, buat catatan di `channel_post_packages`.",
        "8. Edit pesan asli untuk memberi konfirmasi."
      ]
    }
  ]
}
