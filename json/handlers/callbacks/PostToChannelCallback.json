{
  "class_name": "PostToChannelCallback",
  "implements": "CallbackCommandInterface",
  "summary": "Memposting sebuah paket konten ke channel penjualan yang dipilih.",
  "description": "Callback ini dipicu setelah penjual memilih channel dari daftar yang ditampilkan oleh `ShowChannelSelectionCallback`. Ia akan menyalin media dari paket dan mengirimkannya sebagai post baru di channel yang dipilih.",
  "methods": [
    {
      "name": "__construct",
      "description": "Menginisialisasi callback dengan instance `App`.",
      "parameters": [{"name": "app", "type": "App", "description": "Objek aplikasi inti."}]
    },
    {
      "name": "execute",
      "description": "Menjalankan logika posting ke channel.",
      "parameters": [
        {"name": "callback_query", "type": "array", "description": "Data callback query asli."}, 
        {"name": "parts", "type": "array", "description": "Data dari callback, misal: `['post_to_channel', 'package_id', 'channel_id']`."}
      ],
      "logic_flow": [
        "1. Jawab `callback_query`.",
        "2. Ambil `package_id` dan `channel_id` dari `$parts`.",
        "3. Validasi bahwa pengguna adalah pemilik paket.",
        "4. Ambil semua media yang terkait dengan `package_id` dari `MediaFileRepository`.",
        "5. Buat caption untuk post, biasanya berisi deskripsi, harga, dan tombol inline dengan link ke bot (misalnya, `https://t.me/YourBot?start=package_public_id`).",
        "6. Jika paket berisi satu media, panggil `TelegramAPI::copyMessage()`.",
        "7. Jika paket berisi banyak media (grup), panggil `TelegramAPI::sendMediaGroup()`.",
        "8. Edit pesan asli untuk mengonfirmasi bahwa konten telah berhasil diposting."
      ]
    }
  ]
}