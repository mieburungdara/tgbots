{
  "class_name": "AutomaticForwardHandler",
  "summary": "Menangani forward otomatis dari channel dan membalas dengan tombol beli.",
  "description": "Handler ini dipanggil oleh `MessageHandler` untuk pesan yang ditandai sebagai `is_automatic_forward`. Ia akan mencari paket media yang sesuai dengan pesan asli yang di-forward, dan jika ditemukan, akan membalas dengan tombol 'Beli Sekarang' yang mengarah ke bot dengan deep link.",
  "dependencies": [
    "ChannelPostPackageRepository"
  ],
  "methods": [
    {
      "name": "handle",
      "description": "Memeriksa forward, mencari paket, dan mengirim balasan.",
      "parameters": [
        {
          "name": "app",
          "type": "App"
        },
        {
          "name": "message",
          "type": "array",
          "description": "Data pesan dari Telegram."
        }
      ],
      "logic_flow": [
        "1. Memeriksa apakah pesan memiliki `forward_origin`.",
        "2. Menggunakan `ChannelPostPackageRepository` untuk menemukan paket media berdasarkan `original_channel_id` dan `original_message_id`.",
        "3. Jika paket yang valid ditemukan, buat URL deep link `/start` dengan public ID paket.",
        "4. Mengirim pesan balasan ke forward di grup diskusi dengan tombol inline 'Beli Sekarang' yang berisi URL tersebut."
      ]
    }
  ]
}
